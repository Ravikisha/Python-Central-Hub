---
import fs from "node:fs/promises";
import { Markdown, markdown } from "@astropub/md";

interface Props {
  file: string;
  lang?: string;
  title?: string;
  meta?: string;
}
const { file, lang, meta, title } = Astro.props;
const fileNamePath = file;
const fileEtension = file.split(".").pop() ?? "python";
const code = await fs.readFile(fileNamePath, "utf-8");
const codeSegment = `
\`\`\`${lang} title="${title ?? fileEtension}" showLineNumbers{1} ${meta}
${code} \`\`\`
`
---

<details>
  <summary>⚙️ {title}</summary>
  <Markdown of={codeSegment} />
</details>